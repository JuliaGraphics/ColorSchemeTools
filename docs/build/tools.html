<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tools · ColorSchemeTools</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="index.html"><img class="logo" src="assets/logo.png" alt="ColorSchemeTools logo"/></a><h1>ColorSchemeTools</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Introduction</a></li><li class="current"><a class="toctext" href="tools.html">Tools</a><ul class="internal"><li><a class="toctext" href="#Extracting-colorschemes-from-images-1">Extracting colorschemes from images</a></li><li><a class="toctext" href="#Sorting-color-schemes-1">Sorting color schemes</a></li><li><a class="toctext" href="#Weighted-colorschemes-1">Weighted colorschemes</a></li><li><a class="toctext" href="#Linearly-segmented-colors-1">Linearly-segmented colors</a></li></ul></li><li><a class="toctext" href="convertingimages.html">Converting image colors</a></li><li><a class="toctext" href="output.html">Saving colorschemes</a></li><li><a class="toctext" href="functionindex.html">Index</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="tools.html">Tools</a></li></ul></nav><hr/><div id="topbar"><span>Tools</span><a class="fa fa-bars" href="#"></a></div></header><h2><a class="nav-anchor" id="Extracting-colorschemes-from-images-1" href="#Extracting-colorschemes-from-images-1">Extracting colorschemes from images</a></h2><p>You can extract a colorscheme from an image. For example, here&#39;s an image of a famous painting:</p><p><img src="assets/figures/monalisa.jpg" alt="&quot;the mona lisa&quot;"/></p><p>Use <code>extract()</code> to create a colorscheme from the original image:</p><pre><code class="language-none">monalisa = extract(&quot;monalisa.jpg&quot;, 10, 15, 0.01; shrink=2)</code></pre><p>which in this example creates a 10-color scheme (using 15 iterations and with a tolerance of 0.01; the image can be reduced in size, here by 2, before processing, to save time).</p><p><img src="assets/figures/mona-lisa-extract.png" alt="&quot;mona lisa extraction&quot;"/></p><pre><code class="language-none">10-element Array{RGB{Float64},1}:
RGB{Float64}(0.0406901,0.0412985,0.0423865),
RGB{Float64}(0.823493,0.611246,0.234261),
RGB{Float64}(0.374688,0.363066,0.182004),
RGB{Float64}(0.262235,0.239368,0.110915),
RGB{Float64}(0.614806,0.428448,0.112495),
RGB{Float64}(0.139384,0.124466,0.0715472),
RGB{Float64}(0.627381,0.597513,0.340734),
RGB{Float64}(0.955276,0.775304,0.37135),
RGB{Float64}(0.497517,0.4913,0.269587),
RGB{Float64}(0.880421,0.851357,0.538013),
RGB{Float64}(0.738879,0.709218,0.441082)]</code></pre><p>(Extracting colorschemes from images requires image importing and exporting abilities. These are platform-specific. On Linux/UNIX, ImageMagick can be used for importing and exporting images. Use QuartzImageIO on macOS.)</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ColorSchemeTools.extract" href="#ColorSchemeTools.extract"><code>ColorSchemeTools.extract</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">extract(imfile, n=10, i=10, tolerance=0.01; shrink=n)</code></pre><p><code>extract()</code> extracts the most common colors from an image from the image file <code>imfile</code> by finding <code>n</code> dominant colors, using <code>i</code> iterations. You can (and probably should) shrink larger images before running this function.</p><p>Returns a ColorScheme.</p></div></div></section><h2><a class="nav-anchor" id="Sorting-color-schemes-1" href="#Sorting-color-schemes-1">Sorting color schemes</a></h2><p>Use <code>sortcolorscheme()</code> to sort a scheme non-destructively in the LUV color space:</p><pre><code class="language-none">using ColorSchemes, ColorSchemeTools, Colors
sortcolorscheme(ColorSchemes.leonardo)
sortcolorscheme(ColorSchemes.leonardo, rev=true)</code></pre><p>The default is to sort colors by their LUV luminance value, but you could try specifying the <code>:u</code> or <code>:v</code> LUV fields instead (sorting colors is another problem domain not really addressed in this package...):</p><pre><code class="language-none">sortcolorscheme(ColorSchemes.leonardo, :u)</code></pre><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ColorSchemeTools.sortcolorscheme" href="#ColorSchemeTools.sortcolorscheme"><code>ColorSchemeTools.sortcolorscheme</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">sortcolorscheme(colorscheme::ColorScheme, field; kwargs...)</code></pre><p>Sort (non-destructively) a colorscheme using a field of the LUV colorspace.</p><p>The less than function is <code>lt = (x,y) -&gt; compare_colors(x, y, field)</code>.</p><p>The default is to sort by the luminance field <code>:l</code> but could be by <code>:u</code> or <code>:v</code>.</p><p>Returns a new ColorScheme.</p></div></div></section><h2><a class="nav-anchor" id="Weighted-colorschemes-1" href="#Weighted-colorschemes-1">Weighted colorschemes</a></h2><p>Sometimes an image is dominated by some colors with others occurring less frequently. For example, there may be much more brown than yellow in a particular image. A colorscheme derived from this image can reflect this. You can extract both a set of colors and a set of numerical values or weights that indicate the proportions of colors in the image.</p><pre><code class="language-none">using Images
cs, wts = extract_weighted_colors(&quot;monalisa.jpg&quot;, 10, 15, 0.01; shrink=2)</code></pre><p>The colorscheme is now in <code>cs</code>, and <code>wts</code> holds the various weights of each color:</p><pre><code class="language-none">wts
10-element Array{Float64,1}:
0.0521126446851636
0.20025391828582884
0.08954703056671294
0.09603605342678319
0.09507086696018234
0.119987526821047
0.08042973071297582
0.08863381567908292
0.08599068966285295
0.09193772319937041</code></pre><p>With the colorscheme and the weights, you can make a colorscheme in which the more common colors take up more space in the scheme:</p><pre><code class="language-none">len = 50
colorscheme_weighted(cs, wts, len)</code></pre><p>Or in one go:</p><pre><code class="language-none">colorscheme_weighted(extract_weighted_colors(&quot;monalisa.jpg&quot;)...)</code></pre><p>Compare the weighted and unweighted versions of schemes extracted from the Hokusai image &quot;The Great Wave&quot;:</p><p><img src="assets/figures/hok-scheme-unweighted.png" alt="&quot;unweighted&quot;"/></p><p><img src="assets/figures/hok-scheme-weighted.png" alt="&quot;weighted&quot;"/></p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ColorSchemeTools.extract_weighted_colors" href="#ColorSchemeTools.extract_weighted_colors"><code>ColorSchemeTools.extract_weighted_colors</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">extract_weighted_colors(imfile, n=10, i=10, tolerance=0.01; shrink = 2)</code></pre><p>Extract colors and weights of the clusters of colors in an image file. Returns a ColorScheme and weights.</p><p>Example:</p><pre><code class="language-none">pal, wts = extract_weighted_colors(imfile, n, i, tolerance; shrink = 2)</code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ColorSchemeTools.colorscheme_weighted" href="#ColorSchemeTools.colorscheme_weighted"><code>ColorSchemeTools.colorscheme_weighted</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">colorscheme_weighted(colorscheme, weights, length)</code></pre><p>Returns a new colorscheme of length <code>length</code> (default 50) where the proportion of each color in <code>colorscheme</code> is represented by the associated weight of each entry.</p><p>Examples:</p><pre><code class="language-none">colorscheme_weighted(extract_weighted_colors(&quot;hokusai.jpg&quot;)...)
colorscheme_weighted(extract_weighted_colors(&quot;filename00000001.jpg&quot;)..., 500)</code></pre></div></div></section><h2><a class="nav-anchor" id="Linearly-segmented-colors-1" href="#Linearly-segmented-colors-1">Linearly-segmented colors</a></h2><p>A linearly-segmented color dictionary looks like this:</p><pre><code class="language-none"> hsv = Dict(:red =&gt;   ((0., 1., 1.),
                       (0.158730, 1.000000, 1.000000),
                       (0.174603, 0.968750, 0.968750),
                       (0.333333, 0.031250, 0.031250),
                       (0.349206, 0.000000, 0.000000),
                       (0.666667, 0.000000, 0.000000),
                       (0.682540, 0.031250, 0.031250),
                       (0.841270, 0.968750, 0.968750),
                       (0.857143, 1.000000, 1.000000),
                       (1.0, 1.0, 1.0)),
             :green =&gt; ((0., 0., 0.),
                       (0.158730, 0.937500, 0.937500),
                       (0.174603, 1.000000, 1.000000),
                       (0.507937, 1.000000, 1.000000),
                       (0.666667, 0.062500, 0.062500),
                       (0.682540, 0.000000, 0.000000),
                       (1.0, 0., 0.)),
             :blue =&gt;  ((0., 0., 0.),
                       (0.333333, 0.000000, 0.000000),
                       (0.349206, 0.062500, 0.062500),
                       (0.507937, 1.000000, 1.000000),
                       (0.841270, 1.000000, 1.000000),
                       (0.857143, 0.937500, 0.937500),
                       (1.0, 0.09375, 0.09375)))</code></pre><p>The first number in each tuple for each color increases from 0 to 1, the second and third determine the color values. To create a new ColorScheme from this, decide on a sampling rate, then call <code>get_linear_segment_color()</code> and keep the sampled values.</p><pre><code class="language-none">using Colors, ColorSchemes

scheme = RGB[]

for i in 0:0.01:1
    push!(scheme, RGB(get_linear_segment_color(_hsv, i)...))
end

ColorScheme(scheme)</code></pre><p>Make an image from this scheme:</p><pre><code class="language-none">using ColorSchemes, FileIO
img = colorscheme_to_image(ColorScheme(scheme), 450, 60)
save(&quot;/tmp/linseg.png&quot;, img)</code></pre><p><img src="assets/figures/linearsegmentedcolors.png" alt="&quot;linear segmented colorscheme&quot;"/></p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ColorSchemeTools.get_linear_segment_color" href="#ColorSchemeTools.get_linear_segment_color"><code>ColorSchemeTools.get_linear_segment_color</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">get_linear_segment_color(dict, n)</code></pre><p>Get the color for value <code>n</code> from a dictionary of linear color segments.</p><p>For example, suppose you want red to increase from 0 to 1 over the bottom half, green to do the same over the middle half, and blue over the top half. A suitable dictionary would look like this:</p><pre><code class="language-none">cdict = Dict(:red  =&gt; ((0.0, 0.0, 0.0),
                       (0.5, 1.0, 1.0),
                       (1.0, 1.0, 1.0)),
            :green =&gt; ((0.0, 0.0, 0.0),
                       (0.25, 0.0, 0.0),
                       (0.75, 1.0, 1.0),
                       (1.0,  1.0, 1.0)),
            :blue =&gt;  ((0.0,  0.0, 0.0),
                       (0.5,  0.0, 0.0),
                       (1.0,  1.0, 1.0)))</code></pre><p>Each color is defined by a set of tuples. In each tuple, the first number is <code>x</code>. Colors are linearly interpolated in bands between consecutive values of x; if the first tuple is given by <span>$(Z, A, B)$</span> and the second tuple by <code>(X, C, D)</code>, the color of a point <code>n</code> between Z and X will be given by <code>(n - Z) / (X - Z) * (C - B) + B</code>.</p><p>For example, given an entry like this:</p><pre><code class="language-none">:red  =&gt; ((0.0, 0.0, 0.0),
          (0.5, 1.0, 1.0),
          (1.0, 1.0, 1.0))</code></pre><p>and if <code>n</code> = 0.75, we return 1.0; 0.75 is between the second and third segments, but we&#39;d already reached 1.0 (segment 2) when <code>n</code> was 0.5.</p></div></div></section><footer><hr/><a class="previous" href="index.html"><span class="direction">Previous</span><span class="title">Introduction</span></a><a class="next" href="convertingimages.html"><span class="direction">Next</span><span class="title">Converting image colors</span></a></footer></article></body></html>
